{# src/Arii/StatBundle/Resources/views/Default/index.html.twig #}
{% extends "AriiJIDBundle::layout.html.twig" %}
{% block body %}

 <script type="text/javascript">


 dhtmlxEvent(window, "load", function(){
   var layout          = new dhtmlXLayoutObject(document.body, "3L");
   var layout1 = layout.cells("a").attachLayout("2E");

   var menu            = layout.attachMenu();
   var toolbar         = layout.attachToolbar();
   var jobGrid         = layout1.cells("b").attachGrid();
   var tabbar          = layout.cells("b").attachTabbar();
   var dataFrameGrid   = layout.cells("c").attachGrid();


   layout1.cells("a").setText("Menu");
   layout1.cells("a").setHeight(220);

   globalMenu = layout1.cells("a").attachMenu();
   globalMenu.setIconsPath( "{{ asset('/bundles/ariicore/images/menu/') }}" );
   globalMenu.loadStruct("{{ url('xml_menu') }}?route={{ app.request.attributes.get('_route') }}");


   myTabs = layout1.cells("a").attachTabbar();
   myTabs.addTab("a1","{{ "Welcome" | trans }}","100px", null, true);
   myTabs.addTab("a2","{{ "Advanced" | trans }}","100px", null, true);

   myRibbon = myTabs.cells("a1").attachRibbon();
   myRibbon.setIconPath( "{{ asset('bundles/ariicore/images/ribbon/') }}" );
   myRibbon.loadStruct("{{ url('json_JID_ribbon') }}");
   myRibbon.attachEvent("onStateChange", StateRibbon );
   myRibbon.attachEvent("onClick", ClickRibbon );
   myTabs.cells("a1").setActive();
   myFormDate = myTabs.cells("a2").attachForm();
   myFormDate.loadStruct("{{url('xml_JID_job_date_form')}}");





   layout1.cells("b").setText("Jobs");


   layout.cells("b").setText("Charts");
   layout.cells("a").setWidth(500);
   layout.cells("c").setText("Historique");

   tabbar.addTab("a1", "Table"    , "100px", null, true);
   tabbar.addTab("a2", "boxplot"  , "100px");
   tabbar.addTab("a3", "chartplot", "100px");
   tabbar.addTab("a4", "piePlot"  , "100px");

   tabbar.cells('a4').attachURL("./tempChart/pieChart.html");
   tabbar.cells('a3').attachURL("./tempChart/lineChart.html");
   tabbar.cells('a2').attachURL("./tempChart/boxChart.html");


   //contactForm.loadStruct("data/form.xml");
   //contactForm.bind(jobGrid);

   //grid jobs
   jobGrid.setImagePath("codebase/imgs/");
   jobGrid.setIconsPath("icons/");
   jobGrid.setHeader("ID, Job_Name");
   jobGrid.setColTypes("ro,ro");
   jobGrid.setInitWidths("100,*");
   jobGrid.setColAlign("left,left");
   jobGrid.init();
   jobGrid.load("./tempChart/jobs.xml");


   //grid dataframe
   dataFrameGrid.setImagePath("codebase/imgs/");
   dataFrameGrid.setIconsPath("icons/");
   dataFrameGrid.setHeader("ID, Spooler, Job_Name, Start_date, Duration, STEPS, PARAMETERS");
   dataFrameGrid.setColSorting("str,str,str,str,int,str,str");
   //dataFrameGrid.setColTypes("ro, ro, ro, ro, ro, ro, ro");
   dataFrameGrid.setInitWidths("75,250,250,250,250,250,250");
   dataFrameGrid.setColAlign("left, left, left, left, left, left,left");
   dataFrameGrid.init();
   dataFrameGrid.load("./tempChart/dataframe.xml");



   //table of stat
   statGrid = tabbar.cells("a1").attachGrid();
   statGrid.setImagePath("codebase/imgs/");
   statGrid.setIconsPath("icons/");
   statGrid.setHeader("variable, count, mean, std, min, 25%, 50%,75%,max");
   statGrid.setColTypes("ro,ro,ro,ro,ro,ro,ro,ro");
   statGrid.setInitWidths("200,100,*,100,100,100,100,100");
   statGrid.setColAlign("left,center,center,center,center,center,center,center");
   statGrid.init();
   statGrid.load("./tempChart/gridStat.xml");



   //toolbar.setIconsPath("icons/");
   //toolbar.loadStruct("data/toolbar.xml");

   //menu.setIconsPath("icons/");
   //menu.loadStruct("data/menu.xml");

    });
 </script>
 </body>
</html>
{% endblock %}
